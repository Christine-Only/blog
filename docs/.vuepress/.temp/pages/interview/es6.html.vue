<template><div><h1 id="es6çŸ¥è¯†ç‚¹" tabindex="-1"><a class="header-anchor" href="#es6çŸ¥è¯†ç‚¹"><span>ES6çŸ¥è¯†ç‚¹</span></a></h1>
<h2 id="varã€let-åŠ-const-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#varã€let-åŠ-const-åŒºåˆ«"><span>varã€let åŠ const åŒºåˆ«</span></a></h2>
<h3 id="ä½œç”¨åŸŸè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨åŸŸè§„åˆ™"><span>ä½œç”¨åŸŸè§„åˆ™</span></a></h3>
<blockquote>
<p>varå£°æ˜çš„å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå°é—­å‡½æ•°ã€‚letå£°æ˜çš„å˜é‡åªåœ¨å…¶å£°æ˜çš„å—æˆ–å­å—ä¸­å¯ç”¨ã€‚</p>
</blockquote>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">varTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// åŒæ ·çš„å˜é‡!</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">letTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// ä¸åŒçš„å˜é‡</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æŒ‚è½½åˆ°å…¨å±€" tabindex="-1"><a class="header-anchor" href="#æŒ‚è½½åˆ°å…¨å±€"><span>æŒ‚è½½åˆ°å…¨å±€</span></a></h3>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'global'</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token string">'global'</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token string">'global'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'window.a'</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// "global"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'window.b'</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'window.c'</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>c<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é‡å¤å£°æ˜" tabindex="-1"><a class="header-anchor" href="#é‡å¤å£°æ˜"><span>é‡å¤å£°æ˜</span></a></h3>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> a
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 10</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> foo<span class="token punctuation">;</span>
  <span class="token keyword">let</span> foo<span class="token punctuation">;</span> <span class="token comment">// SyntaxError thrown.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æš‚å­˜æ­»åŒº" tabindex="-1"><a class="header-anchor" href="#æš‚å­˜æ­»åŒº"><span>æš‚å­˜æ­»åŒº</span></a></h3>
<blockquote>
<p>ä¸é€šè¿‡  <code v-pre>var</code> å£°æ˜çš„æœ‰åˆå§‹åŒ–å€¼ <code v-pre>undefined</code> çš„å˜é‡ä¸åŒï¼Œé€šè¿‡ <code v-pre>let</code> å£°æ˜çš„å˜é‡ç›´åˆ°å®ƒä»¬çš„å®šä¹‰è¢«æ‰§è¡Œæ—¶æ‰åˆå§‹åŒ–ã€‚åœ¨å˜é‡åˆå§‹åŒ–å‰è®¿é—®è¯¥å˜é‡ä¼šå¯¼è‡´ <code v-pre>ReferenceError</code>ã€‚è¯¥å˜é‡å¤„åœ¨ä¸€ä¸ªè‡ªå—é¡¶éƒ¨åˆ°åˆå§‹åŒ–å¤„ç†çš„â€œæš‚å­˜æ­»åŒºâ€ä¸­ã€‚</p>
</blockquote>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token keyword">let</span> a
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æš‚å­˜æ­»åŒºä¸typeof" tabindex="-1"><a class="header-anchor" href="#æš‚å­˜æ­»åŒºä¸typeof"><span>æš‚å­˜æ­»åŒºä¸<code v-pre>typeof</code></span></a></h3>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> undeclaredVariable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'undefined'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“ï¼š</p>
<ul>
<li>å‡½æ•°æå‡ä¼˜å…ˆäºå˜é‡æå‡ï¼Œå‡½æ•°æå‡ä¼šæŠŠæ•´ä¸ªå‡½æ•°æŒªåˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œå˜é‡æå‡åªä¼šæŠŠå£°æ˜æŒªåˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼›</li>
<li><code v-pre>var</code> å­˜åœ¨æå‡ï¼Œæˆ‘ä»¬èƒ½åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ã€‚<code v-pre>let</code>ã€<code v-pre>const</code> å› ä¸ºæš‚æ—¶æ€§æ­»åŒºçš„åŸå› ï¼Œä¸èƒ½åœ¨å£°æ˜å‰ä½¿ç”¨ï¼›</li>
<li><code v-pre>var</code> åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜å˜é‡ä¼šå¯¼è‡´å˜é‡æŒ‚è½½åœ¨ <code v-pre>window</code> ä¸Šï¼Œå…¶ä»–ä¸¤è€…ä¸ä¼šï¼›</li>
<li><code v-pre>let</code> å’Œ <code v-pre>const</code> ä½œç”¨åŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯åè€…å£°æ˜çš„å˜é‡ä¸èƒ½è¢«å†æ¬¡èµ‹å€¼ã€‚</li>
</ul>
<h2 id="é¢„è§£æ" tabindex="-1"><a class="header-anchor" href="#é¢„è§£æ"><span>é¢„è§£æ</span></a></h2>
<p>å‡½æ•°å˜é‡åŠä½œç”¨åŸŸ</p>
<p>éšå¼å…¨å±€å˜é‡ï¼šå˜é‡æ²¡æœ‰å£°æ˜ï¼Œç›´æ¥èµ‹å€¼ï¼Œæ‰§è¡Œåˆ°æ—¶ï¼Œæµè§ˆå™¨æ‰ä¼šå·å·æŠŠå˜é‡æå‡ä¸ºéšå¼å…¨å±€å˜é‡</p>
<p>å…¨å±€ä½œç”¨åŸŸï¼šåœ¨å‡½æ•°å£°æ˜ä¹‹å¤–çš„ä½œç”¨åŸŸ</p>
<p>é¢„è§£æ:</p>
<ol>
<li>æ‰€æœ‰çš„å˜é‡å£°æ˜ï¼Œéƒ½ä¼šæå‡åˆ°æœ€é¡¶éƒ¨ï¼Œä½†ä¸ä¼šæå‡èµ‹å€¼ï¼›</li>
<li>æ‰€æœ‰çš„å‡½æ•°å£°æ˜ï¼Œéƒ½ä¼šæå‡åˆ°æœ€é¡¶éƒ¨ï¼Œä½†ä¸ä¼šæå‡å‡½æ•°çš„è°ƒç”¨ï¼›</li>
<li>å¦‚æœåŒæ—¶æœ‰å¤šä¸ª <code v-pre>var</code> å£°æ˜çš„ç›¸åŒçš„å˜é‡ï¼Œåé¢çš„ <code v-pre>var</code> å°†è¢«å¿½ç•¥ï¼›</li>
<li>å¦‚æœåŒæ—¶æœ‰å¤šä¸ªåŒåçš„å‡½æ•°ï¼Œåé¢çš„å‡½æ•°å°†ä¼šè¦†ç›–å‰é¢çš„å‡½æ•°ï¼›</li>
<li>å¦‚æœå£°æ˜çš„å˜é‡å’Œå£°æ˜çš„å‡½æ•°åŒåï¼Œå£°æ˜çš„å‡½æ•°å°†ä¼šè¦†ç›–å£°æ˜çš„å˜é‡ã€‚</li>
</ol>
<p>è¯æ³•åˆ†æ3æ­¥éª¤:</p>
<ol>
<li>å…ˆåˆ†æå‡½æ•°å½¢å‚ï¼ˆé»˜è®¤å€¼ä¸ºundefinedï¼‰ï¼Œå†åˆ†æå½¢å‚èµ‹å€¼ï¼ˆæ²¡æœ‰å½¢å‚çš„ç›´æ¥å¿½ç•¥æ­¤æ­¥éª¤ï¼‰</li>
<li>åˆ†æå‡½æ•°ä½“ä¸­æ‰€æœ‰çš„å˜é‡å£°æ˜ï¼š
<ul>
<li>å¦‚æœå˜é‡åä¸å½¢å‚åç›¸åŒæ—¶ï¼Œç›´æ¥å¿½ç•¥ <code v-pre>var</code>;</li>
<li>å¦‚æœå˜é‡åä¸å½¢å‚åä¸åŒæ—¶ï¼Œå°±ç›¸å½“äºå£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œå¦‚var fooï¼Œå€¼ä¸ºundefined;</li>
</ul>
</li>
<li>åˆ†æå‡½æ•°ä½“ä¸­æ‰€æœ‰çš„å‡½æ•°å£°æ˜ï¼š
<ul>
<li>å¦‚æœå‡½æ•°åä¸å˜é‡åç›¸åŒï¼Œå‡½æ•°å°†ä½œä¸ºå˜é‡çš„å€¼ï¼›</li>
<li>å¦‚æœå‡½æ•°åä¸å˜é‡åä¸ç›¸åŒï¼Œç›¸å½“äº <code v-pre>var å‡½æ•°å = function å‡½æ•°å () {}</code>;</li>
</ul>
</li>
</ol>
<p>å‡½æ•°æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸º2æ­¥:</p>
<ol>
<li>è¯æ³•åˆ†æè¿‡ç¨‹;</li>
<li>æ‰§è¡Œè¿‡ç¨‹</li>
</ol>
<p>æ —å­1:</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  b<span class="token operator">=</span><span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ —å­2:</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">t3</span><span class="token punctuation">(</span><span class="token parameter">greet</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?</span>
  <span class="token keyword">var</span> greet <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?</span>
  <span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?</span>
<span class="token punctuation">}</span>
<span class="token function">t3</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ —å­3:</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">234</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> a<span class="token punctuation">;</span>
  b <span class="token operator">=</span> <span class="token number">234</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çŸ¥è¯†ç‚¹è¡¥å……:</p>
<p>argumentsæ˜¯ä¸€ä¸ªå¯¹åº”äºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°çš„ç±»æ•°ç»„å¯¹è±¡ã€‚(å¯ä»¥è·å–å®å‚)</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ —å­4:</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//?</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?</span>
  f <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a<span class="token punctuation">;</span>
<span class="token function">demo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">è­¦å‘Š</p>
<p>å…·åå‡½æ•°ä¸­çš„å˜é‡ä¸èƒ½ç”¨æ¥è°ƒç”¨å‡½æ•°ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//123</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>æŠ¥é”™
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>
<h2 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy"><span>Proxy</span></a></h2>
<blockquote>
<p><code v-pre>Proxy</code> æ˜¯ES6æ–°å¢çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ç”¨æ¥è‡ªå®šä¹‰å¯¹è±¡ä¸­çš„æ“ä½œã€‚</p>
</blockquote>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»£ç è¯¦è§£ï¼š</p>
<ul>
<li><code v-pre>target</code>ä»£è¡¨éœ€è¦æ·»åŠ ä»£ç†çš„å¯¹è±¡</li>
<li><code v-pre>handler</code>ç”¨æ¥è‡ªå®šä¹‰å¯¹è±¡ä¸­çš„æ“ä½œï¼Œæ¯”å¦‚å¯ä»¥ç”¨æ¥è‡ªå®šä¹‰ <code v-pre>set</code> å’Œ <code v-pre>get</code> å‡½æ•°ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡Proxyæ¥å®ç°ä¸€ä¸ªæ•°æ®å“åº”å¼</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">onWatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> setBind<span class="token punctuation">,</span> getLogger</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">getLogger</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">)</span>
      <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setBind</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> property<span class="token punctuation">)</span>
      <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'christine'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token function">onWatch</span><span class="token punctuation">(</span>
  user<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ç›‘å¬åˆ°å±æ€§</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>property<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">æ”¹å˜ä¸º</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>property<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">' = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>target<span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Picker'</span> <span class="token comment">// ç›‘å¬åˆ°å±æ€§nameæ”¹å˜ä¸ºPicker</span>
user<span class="token punctuation">.</span>name <span class="token comment">// 'name' = 'Picker'</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="setã€weaksetã€mapã€weakmap" tabindex="-1"><a class="header-anchor" href="#setã€weaksetã€mapã€weakmap"><span>Setã€WeakSetã€Mapã€WeakMap</span></a></h2>
<blockquote>
<p><code v-pre>Set</code> å’Œ <code v-pre>Map</code> ä¸»è¦çš„åº”ç”¨åœºæ™¯åœ¨äº <code v-pre>æ•°æ®é‡ç»„</code> å’Œ <code v-pre>æ•°æ®å­˜å‚¨</code>ã€‚
<code v-pre>Set</code> æ˜¯ä¸€ç§å«åšé›†åˆçš„æ•°æ®ç»“æ„ï¼Œ<code v-pre>Map</code> æ˜¯ä¸€ç§å«åšå­—å…¸çš„æ•°æ®ç»“æ„ã€‚</p>
</blockquote>
<h3 id="set-é›†åˆ" tabindex="-1"><a class="header-anchor" href="#set-é›†åˆ"><span>Setï¼ˆé›†åˆï¼‰</span></a></h3>
<p>ES6 æ–°å¢çš„ä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜æ˜¯å”¯ä¸€ä¸”æ— åºçš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p>
<p>Setæœ¬èº«æ˜¯ä¸€ç§æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆSetæ•°æ®ç»“æ„ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span>iterable<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ğŸŒ°ï¼š</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">num</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//[1,2,3]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code v-pre>Set</code> å¯¹è±¡å…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼ï¼Œæ— è®ºæ˜¯åŸå§‹å€¼orå¯¹è±¡å¼•ç”¨ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span>
arr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
arr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment">// 4</span>

arr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment">// 5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog/set.jpg" alt="alt"></p>
<ul>
<li>
<p>Set å®ä¾‹å±æ€§</p>
<ul>
<li>
<p>constructorï¼š æ„é€ å‡½æ•°ï¼Œè¿”å›Set</p>
</li>
<li>
<p>sizeï¼šè¿”å›å®ä¾‹æˆå‘˜æ€»æ•°</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment">// 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
</li>
<li>
<p>Set å®ä¾‹æ–¹æ³•</p>
<ul>
<li>
<p>æ“ä½œæ–¹æ³•</p>
<ul>
<li>
<p>add(value)ï¼šå‘ä¸€ä¸ª Set å¯¹è±¡çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªæŒ‡å®šçš„å€¼ã€‚è¿”å› <code v-pre>Set</code> å¯¹è±¡æœ¬èº«</p>
</li>
<li>
<p>delete(value)ï¼šä»ä¸€ä¸ª Set å¯¹è±¡ä¸­åˆ é™¤æŒ‡å®šçš„å…ƒç´ ã€‚æˆåŠŸåˆ é™¤è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</p>
</li>
<li>
<p>has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥æŒ‡ç¤ºå¯¹åº”çš„å€¼valueæ˜¯å¦å­˜åœ¨Setå¯¹è±¡ä¸­ã€‚</p>
</li>
<li>
<p>clear()ï¼šç”¨æ¥æ¸…ç©ºä¸€ä¸ª Set å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

set<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
set<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
set<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
set<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code v-pre>Array.from</code> å’Œ <code v-pre>...</code>å¯ä»¥å°†Setå¯¹è±¡è½¬ä¸ºæ•°ç»„</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> array <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3]</span>

or

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>set<span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
</li>
<li>
<p>éå†æ–¹æ³•</p>
<ul>
<li>
<p>keys()ï¼šæŒ‰ç…§å…ƒç´ æ’å…¥é¡ºåºè¿”å›ä¸€ä¸ªå…·æœ‰ Set å¯¹è±¡æ¯ä¸ªå…ƒç´ å€¼çš„å…¨æ–° Iterator å¯¹è±¡ã€‚</p>
</li>
<li>
<p>values()ï¼šæŒ‰ç…§å…ƒç´ æ’å…¥é¡ºåºè¿”å›ä¸€ä¸ªå…·æœ‰ Set å¯¹è±¡æ¯ä¸ªå…ƒç´ å€¼çš„å…¨æ–° Iterator å¯¹è±¡ã€‚</p>
</li>
<li>
<p>entries()ï¼šè¿”å›ä¸€ä¸ªåŒ…å«Setå¯¹è±¡ä¸­æ‰€æœ‰å…ƒç´ å¾—é”®å€¼å¯¹è¿­ä»£å™¨</p>
</li>
<li>
<p>forEach(callbackFn, thisArg)ï¼šç”¨äºå¯¹é›†åˆæˆå‘˜æ‰§è¡ŒcallbackFnæ“ä½œï¼Œå¦‚æœæä¾›äº† thisArg å‚æ•°ï¼Œå®ƒä¾¿æ˜¯å›è°ƒå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ thisã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// SetIterator {1, 2, 3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// SetIterator {1, 2, 3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// SetIterator {1 => 1, 2 => 2, 3 => 3}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> set<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// 1 2  3</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> set<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// [1, 1] [2, 2] [3, 3]</span>

set<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=></span>  <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">' : '</span> <span class="token operator">+</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 1 : 1 2 : 2  3 : 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>set<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Set å¯é»˜è®¤éå†ï¼Œé»˜è®¤è¿­ä»£å™¨ç”Ÿæˆå‡½æ•°æ˜¯ values() æ–¹æ³•</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>values <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="custom-container tip"><p class="custom-container-title">æ€»ç»“</p>
<ul>
<li>å‘ <code v-pre>Set</code> åŠ å…¥å¤šä¸ªNaNæ—¶ï¼Œåªä¼šå­˜åœ¨ä¸€ä¸ª<code v-pre>NaN</code>ï¼›</li>
<li>å‘ <code v-pre>Set</code> æ·»åŠ å€¼æ—¶ä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢<code v-pre>(5 !== &quot;5&quot;)</code>ï¼›</li>
<li>å‘ <code v-pre>Set</code> æ·»åŠ ä¸åŒå†…å­˜åœ°å€çš„&quot;ç›¸åŒå¯¹è±¡&quot;æ—¶ï¼Œä¼šåŒæ—¶å­˜åœ¨Setå¯¹è±¡ä¸­ï¼›</li>
<li><code v-pre>keys()</code> å’Œ <code v-pre>values()</code> çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œ<code v-pre>entries()</code> è¿”å›çš„éå†å™¨åŒæ—¶åŒ…æ‹¬é”®å’Œå€¼ä¸”ä¸¤å€¼ç›¸ç­‰ã€‚</li>
</ul>
</div>
<h3 id="weakset" tabindex="-1"><a class="header-anchor" href="#weakset"><span>WeakSet</span></a></h3>
<blockquote>
<p><code v-pre>WeakSet</code> å¯¹è±¡å…è®¸ä½ å°†å¼±å¼•ç”¨å¯¹è±¡å­˜å‚¨åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚</p>
</blockquote>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">[</span>iterable<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>WeakSet ä¸ Set çš„åŒºåˆ«ï¼š</p>
<ul>
<li>WeakSet åªèƒ½å‚¨å­˜å¯¹è±¡å¼•ç”¨ï¼Œä¸èƒ½å­˜æ”¾å€¼ï¼Œè€Œ Set å¯¹è±¡éƒ½å¯ä»¥</li>
<li>æˆå‘˜éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘WeakSetç»“æ„å¯¹æ­¤æˆå‘˜çš„å¼•ç”¨</li>
<li>å…¶ä»–å¯¹è±¡ä¸å†å¼•ç”¨æˆå‘˜æ—¶ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶æ­¤æˆå‘˜æ‰€å ç”¨çš„å†…å­˜ï¼Œä¸è€ƒè™‘æ­¤æˆå‘˜æ˜¯å¦è¿˜å­˜åœ¨äºWeakSetç»“æ„ä¸­</li>
</ul>
<p>å±æ€§ï¼š</p>
<ul>
<li>
<p>constructorï¼šæ„é€ å‡½æ•°ï¼Œä»»ä½•ä¸€ä¸ªå…·æœ‰ Iterable æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½œå‚æ•°</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> weakSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakSet<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog/weakSet.jpg" alt="alt"></p>
</li>
</ul>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>add(value)ï¼šåœ¨ WeakSet å¯¹è±¡çš„æœ€åä¸€ä¸ªå…ƒç´ åæ·»åŠ æ–°çš„å¯¹è±¡ã€‚</p>
</li>
<li>
<p>has(value)ï¼šæ ¹æ® WeakSet æ˜¯å¦å­˜åœ¨ç›¸åº”å¯¹è±¡è¿”å›å¸ƒå°”å€¼ã€‚</p>
</li>
<li>
<p>delete(value)ï¼šä» WeakSet å¯¹è±¡ä¸­ç§»é™¤æŒ‡å®šçš„å…ƒç´ ã€‚</p>
</li>
<li>
<p><s>clear()ï¼šæ¸…ç©ºæ‰€æœ‰å…ƒç´ ï¼Œæ³¨æ„è¯¥æ–¹æ³•å·²åºŸå¼ƒã€‚</s></p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

ws<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

ws<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// true</span>
ws<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment">// false</span>

ws<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// true</span>
ws<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h3 id="map-å­—å…¸" tabindex="-1"><a class="header-anchor" href="#map-å­—å…¸"><span>Mapï¼ˆå­—å…¸ï¼‰</span></a></h3>
<p><strong>ä»»ä½•å…·æœ‰ Iterator æ¥å£ã€ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥å½“ä½œMapæ„é€ å‡½æ•°çš„å‚æ•°</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
m1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>

<span class="token keyword">const</span> m2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> m3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
m3<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè¯»å–ä¸€ä¸ªæœªçŸ¥çš„é”®ï¼Œåˆ™è¿”å› <code v-pre>undefined</code>ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åªæœ‰å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ŒMap å¯¹è±¡æ‰å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">555</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç çš„ <code v-pre>set</code> å’Œ <code v-pre>get</code> æ–¹æ³•ï¼Œè¡¨é¢æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸¤ä¸ªå€¼ï¼Œå†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤ <code v-pre>get</code> æ–¹æ³•æ— æ³•è¯»å–è¯¥é”®ï¼Œè¿”å› <code v-pre>undefined</code>ã€‚</p>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>Map çš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰©å±•åˆ«äººçš„åº“çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®åï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§ä¸åŸä½œè€…çš„å±æ€§åŒåã€‚</p>
</div>
<p>å¦‚æœ Map çš„é”®æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œåˆ™åªè¦ä¸¤ä¸ªå€¼ä¸¥æ ¼ç›¸ç­‰ï¼ŒMap å°†å…¶è§†ä¸ºä¸€ä¸ªé”®ï¼Œæ¯”å¦‚ <code v-pre>0</code> å’Œ <code v-pre>-0</code> å°±æ˜¯ä¸€ä¸ªé”®ï¼Œå¸ƒå°”å€¼ <code v-pre>true</code> å’Œå­—ç¬¦ä¸² <code v-pre>true</code> åˆ™æ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚å¦å¤–ï¼Œ<code v-pre>undefined</code> å’Œ <code v-pre>null</code> ä¹Ÿæ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚è™½ç„¶ <code v-pre>NaN</code> ä¸ä¸¥æ ¼ç›¸ç­‰äºè‡ªèº«ï¼Œä½† <code v-pre>Map</code> å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 666</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 888</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// 6</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog/Map.jpg" alt="alt"></p>
<ul>
<li>
<p>Map å®ä¾‹å±æ€§</p>
<ul>
<li>
<p>constructorï¼šæ„é€ å‡½æ•°ï¼Œè¿”å›Mapå¯¹è±¡</p>
</li>
<li>
<p>sizeï¼šè¿”å›å®ä¾‹æˆå‘˜æ€»æ•°</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

map<span class="token punctuation">.</span>size <span class="token comment">// 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
</li>
<li>
<p>Map å®ä¾‹æ–¹æ³•</p>
<ul>
<li>æ“ä½œæ–¹æ³•
<ul>
<li>set(key, value)ï¼šæ·»åŠ é”®å€¼å¯¹ï¼Œè¿”å›å®ä¾‹</li>
<li>get(key)ï¼šé€šè¿‡é”®æŸ¥æ‰¾ç‰¹å®šçš„æ•°å€¼å¹¶è¿”å›</li>
<li>delete(key)ï¼šç§»é™¤ Map å¯¹è±¡ä¸­æŒ‡å®šçš„å…ƒç´ ï¼Œè¿”å›å¸ƒå°”</li>
<li>has(key)ï¼šåˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨é”®keyï¼Œè¿”å›å¸ƒå°”</li>
<li>clear()ï¼šç§»é™¤Mapå¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</li>
</ul>
</li>
<li>éå†æ–¹æ³•
<ul>
<li>
<p>keys()ï¼šå°†å­—å…¸ä¸­åŒ…å«çš„æ‰€æœ‰é”®åä»¥è¿­ä»£å™¨å½¢å¼è¿”å›</p>
</li>
<li>
<p>values()ï¼šå°†å­—å…¸ä¸­åŒ…å«çš„æ‰€æœ‰å…ƒç´ çš„å€¼ä»¥è¿­ä»£å™¨å½¢å¼è¿”å›</p>
</li>
<li>
<p>entries()ï¼šè¿”å›ä»¥é”®å’Œå€¼ä¸ºéå†å™¨çš„å¯¹è±¡</p>
</li>
<li>
<p>forEach()ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

map<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// MapIterator {'name', 'age'}</span>
map<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// // MapIterator {'name' => 'Christine', 'age' => 18}</span>
map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key <span class="token punctuation">,</span>map</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">map.get('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">') = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Map ç»“æ„çš„é»˜è®¤éå†å™¨æ¥å£ï¼ˆ<code v-pre>Symbol.iterator</code>å±æ€§ï¼‰ï¼Œå°±æ˜¯<code v-pre>entries</code>æ–¹æ³•ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code>map<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">===</span> map<span class="token punctuation">.</span>entries <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="/blog/map2.jpg" alt="alt">
Mapç»“æ„è½¬ä¸ºæ•°æ®ç»“æ„ï¼Œæ¯”è¾ƒå¿«é€Ÿçš„æ–¹æ³•æ˜¯
<code v-pre>Array.from</code> å’Œ <code v-pre>...</code>ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token comment">// [['name', 'Christine'],['age', 18]]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">æ€»ç»“</p>
<ul>
<li>å¾ªç¯éå† <code v-pre>Map</code> å¯¹è±¡å¯ä»¥ä½¿ç”¨ <code v-pre>let [key, value] of map</code>ï¼›</li>
<li>å¯¹åŒä¸€ä¸ªé”®å¤šæ¬¡èµ‹å€¼ï¼Œåé¢çš„å€¼å°†è¦†ç›–å‰é¢çš„å€¼ï¼›</li>
<li>å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œè¢«è§†ä¸ºä¸€ä¸ªé”®ï¼›</li>
<li>å¯¹åŒæ ·å€¼çš„ä¸¤ä¸ªå®ä¾‹ï¼Œè¢«è§†ä¸ºä¸¤ä¸ªé”®ï¼›</li>
<li>æ·»åŠ å¤šä¸ª <code v-pre>NaN</code> ä½œä¸ºé”®æ—¶ï¼Œåªä¼šå­˜åœ¨ä¸€ä¸ª <code v-pre>NaN</code> ä½œä¸ºé”®çš„å€¼ï¼›</li>
</ul>
</div>
<h3 id="weakmap" tabindex="-1"><a class="header-anchor" href="#weakmap"><span>WeakMap</span></a></h3>
<blockquote>
<p>WeakMap å¯¹è±¡æ˜¯ä¸€ç»„é”®å€¼å¯¹çš„é›†åˆï¼Œå…¶ä¸­çš„é”®æ˜¯å¼±å¼•ç”¨å¯¹è±¡ï¼Œè€Œå€¼å¯ä»¥æ˜¯ä»»æ„ã€‚
WeakMap å¼±å¼•ç”¨çš„åªæ˜¯é”®åï¼Œè€Œä¸æ˜¯é”®å€¼ã€‚é”®å€¼ä¾ç„¶æ˜¯æ­£å¸¸å¼•ç”¨ã€‚</p>
</blockquote>
<p>WeakMap ä¸­ï¼Œæ¯ä¸ªé”®å¯¹è‡ªå·±æ‰€å¼•ç”¨å¯¹è±¡çš„å¼•ç”¨éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œåœ¨æ²¡æœ‰å…¶ä»–å¼•ç”¨å’Œè¯¥é”®å¼•ç”¨åŒä¸€å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«åƒåœ¾å›æ”¶ï¼ˆç›¸åº”çš„keyåˆ™å˜æˆæ— æ•ˆçš„ï¼‰ï¼Œæ‰€ä»¥ï¼ŒWeakMap çš„ key æ˜¯ä¸å¯æšä¸¾çš„ã€‚</p>
<p>å±æ€§ï¼š</p>
<ul>
<li>constructorï¼šæ„é€ å‡½æ•°ï¼Œè¿”å›WeakMap</li>
</ul>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>get(key)ï¼šè¿”å›é”®å€¼å¯¹ï¼›</li>
<li>set(key, value)ï¼šæ ¹æ®æŒ‡å®šçš„keyå’Œvalueåœ¨ WeakMapå¯¹è±¡ä¸­æ·»åŠ æ–°/æ›´æ–°å…ƒç´ ï¼Œè¿”å›å®ä¾‹ï¼›</li>
<li>delete(key)ï¼šåˆ é™¤é”®å€¼å¯¹ï¼Œè¿”å›å¸ƒå°”ï¼›</li>
<li>has(key)ï¼šæ£€æŸ¥é”®å€¼å¯¹ï¼Œè¿”å›å¸ƒå°”ã€‚</li>
</ul>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> wm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

wm<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
wm<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">"baz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog/weakMap.jpg" alt="alt"></p>
<h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h3>
<ul>
<li>Set
<ul>
<li>æˆå‘˜å”¯ä¸€ã€æ— åºä¸”ä¸é‡å¤</li>
<li>[value, value]ï¼Œé”®å€¼ä¸é”®åæ˜¯ä¸€è‡´çš„ï¼ˆæˆ–è€…è¯´åªæœ‰é”®å€¼ï¼Œæ²¡æœ‰é”®åï¼‰</li>
<li>å¯ä»¥éå†</li>
</ul>
</li>
<li>WeakSet
<ul>
<li>æˆå‘˜éƒ½æ˜¯å¯¹è±¡</li>
<li>æˆå‘˜éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ï¼Œå¯ä»¥ç”¨æ¥ä¿å­˜DOMèŠ‚ç‚¹ï¼Œä¸å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼</li>
<li>ä¸èƒ½éå†</li>
</ul>
</li>
<li>Map
<ul>
<li>æœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œç±»ä¼¼é›†åˆ</li>
<li>å¯ä»¥éå†ï¼Œæ–¹æ³•å¾ˆå¤šå¯ä»¥è·Ÿå„ç§æ•°æ®æ ¼å¼è½¬æ¢</li>
</ul>
</li>
<li>WeakMap
<ul>
<li>åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnullé™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®å</li>
<li>é”®åæ˜¯å¼±å¼•ç”¨ï¼Œé”®å€¼å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œé”®åæ‰€æŒ‡å‘çš„å¯¹è±¡å¯ä»¥è¢«åƒåœ¾å›æ”¶ï¼Œæ­¤æ—¶é”®åæ˜¯æ— æ•ˆçš„</li>
<li>ä¸èƒ½éå†</li>
</ul>
</li>
</ul>
</div></template>


