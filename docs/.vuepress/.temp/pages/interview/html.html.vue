<template><div><h1 id="html-çŸ¥è¯†ç‚¹" tabindex="-1"><a class="header-anchor" href="#html-çŸ¥è¯†ç‚¹"><span>Html çŸ¥è¯†ç‚¹</span></a></h1>
<h2 id="å¦‚ä½•å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½"><span>å¦‚ä½•å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½</span></a></h2>
<blockquote>
<p>å½“æˆ‘ä»¬ç¢°åˆ°é•¿ç½‘é¡µæœ‰å¾ˆå¤šå›¾ç‰‡æ—¶ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨å…ˆåŠ è½½å‡ºç°åœ¨è§†å£å†…çš„å‡ å¼ å›¾ç‰‡ï¼Œå½“æ»šåŠ¨æ¡æ»šåŠ¨åˆ°ç›¸åº”å›¾ç‰‡çš„ä½ç½®æ—¶æ‰å»åŠ è½½åˆ«çš„å›¾ç‰‡ã€‚è¿™ç§å»¶è¿ŸåŠ è½½çš„æ–¹å¼æˆ‘ä»¬å°±ç§°ä¹‹ä¸ºæ‡’åŠ è½½ã€‚</p>
</blockquote>
<p>æ•…é—®é¢˜æ‹†åˆ†æˆä¸¤ä¸ªï¼š</p>
<ol>
<li>å¦‚ä½•åˆ¤æ–­å›¾ç‰‡å‡ºç°åœ¨äº†å½“å‰è§†å£ ï¼ˆå³å¦‚ä½•åˆ¤æ–­æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°å›¾ç‰‡ï¼‰</li>
<li>å¦‚ä½•æ§åˆ¶å›¾ç‰‡çš„åŠ è½½</li>
</ol>
<h3 id="æ–¹æ¡ˆä¸€-ä½ç½®è®¡ç®—-æ»šåŠ¨äº‹ä»¶-scroll-dataset-api" tabindex="-1"><a class="header-anchor" href="#æ–¹æ¡ˆä¸€-ä½ç½®è®¡ç®—-æ»šåŠ¨äº‹ä»¶-scroll-dataset-api"><span>æ–¹æ¡ˆä¸€ï¼šä½ç½®è®¡ç®— + æ»šåŠ¨äº‹ä»¶ (Scroll) + DataSet API</span></a></h3>
<p>é¦–å…ˆè¦ç†è§£ä¸‰ä¸ªå±æ€§çš„å«ä¹‰åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>offsetTopï¼šè¿”å›å½“å‰å…ƒç´ ç›¸å¯¹äºå…¶ <code v-pre>offsetParent</code> å…ƒç´ çš„é¡¶éƒ¨å†…è¾¹è·çš„è·ç¦»ã€‚</li>
<li>clientHeightï¼š <code v-pre>document.documentElement.clientHeight</code>æµè§ˆå™¨å¯è§†çª—å£çš„é«˜åº¦ã€‚</li>
<li>scrollTopï¼šè·å–æˆ–è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„å†…å®¹å‚ç›´æ»šåŠ¨çš„åƒç´ æ•°ã€‚</li>
</ul>
<p>å¦‚ä½•åˆ¤æ–­å›¾ç‰‡å‡ºç°åœ¨äº†å½“å‰è§†å£</p>
<p>å½“ <code v-pre>offsetTop</code> &lt;= <code v-pre>clientHeight</code> + <code v-pre>scrollTop</code>æ—¶ï¼Œå¯ä»¥åˆ¤æ–­å›¾ç‰‡å‡ºç°åœ¨äº†å½“å‰è§†å£ã€‚</p>
<p>å¦‚ä½•æ§åˆ¶å›¾ç‰‡çš„åŠ è½½</p>
<p>å¯ä»¥é€šè¿‡å°†å›¾ç‰‡çš„åœ°å€ä¿å­˜åœ¨imgå…ƒç´ çš„è‡ªå®šä¹‰å±æ€§ä¸Šé¢ï¼Œå½“éœ€è¦åŠ è½½çš„æ—¶å€™å†å°†è¯¥è‡ªå®šä¹‰å±æ€§èµ‹å€¼ç»™è¯¥å›¾ç‰‡çš„srcã€‚</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logo.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code> <span class="token comment">// ä½¿ç”¨data-xxçš„è‡ªå®šä¹‰å±æ€§å¯ä»¥é€šè¿‡domå…ƒç´ çš„dataset.xxå–å¾—ï¼›</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>datset<span class="token punctuation">.</span>src
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›‘å¬æ»šåŠ¨äº‹ä»¶åŠ è½½åé¢çš„å›¾ç‰‡</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">lazyLoad</span><span class="token punctuation">(</span><span class="token string">'éœ€è¦æ‡’åŠ è½½çš„å›¾ç‰‡'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="æ–¹æ¡ˆäºŒ-getboundingclientrect-api-scroll-with-throttle-dataset-api" tabindex="-1"><a class="header-anchor" href="#æ–¹æ¡ˆäºŒ-getboundingclientrect-api-scroll-with-throttle-dataset-api"><span>æ–¹æ¡ˆäºŒï¼šgetBoundingClientRect API + Scroll with Throttle + DataSet API</span></a></h3>
<p><code v-pre>Element.getBoundingClientRect()</code> æ–¹æ³•è¿”å›å…ƒç´ çš„å¤§å°åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®ã€‚</p>
<p>å¦‚ä½•åˆ¤æ–­å›¾ç‰‡å‡ºç°åœ¨äº†å½“å‰è§†å£</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token comment">// clientHeight ä»£è¡¨å½“å‰è§†å£çš„é«˜åº¦</span>
img<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">&lt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›‘å¬ <code v-pre>window.scroll</code> äº‹ä»¶ä¹Ÿä¼˜åŒ–ä¸€ä¸‹</p>
<p>åŠ ä¸ªèŠ‚æµå™¨ï¼Œæé«˜æ€§èƒ½ã€‚å·¥ä½œä¸­æ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯<code v-pre>lodash.throttle</code></p>
<h3 id="æ–¹æ¡ˆä¸‰-intersectionobserver-api-dataset-api" tabindex="-1"><a class="header-anchor" href="#æ–¹æ¡ˆä¸‰-intersectionobserver-api-dataset-api"><span>æ–¹æ¡ˆä¸‰ï¼šIntersectionObserver API + DataSet API</span></a></h3>
<p>å¦‚ä½•åˆ¤æ–­å›¾ç‰‡å‡ºç°åœ¨äº†å½“å‰è§†å£</p>
<p>æ–¹æ¡ˆäºŒä½¿ç”¨çš„æ–¹æ³•æ˜¯: <code v-pre>window.scroll</code> ç›‘å¬ <code v-pre>Element.getBoundingClientRect()</code> å¹¶ä½¿ç”¨ <code v-pre>_.throttle</code> èŠ‚æµã€‚</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver/IntersectionObserver" target="_blank" rel="noopener noreferrer">IntersectionObserver<ExternalLinkIcon/></a></p>
<p>äº‹ä»¶å›è°ƒçš„å‚æ•°æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserverEntry" target="_blank" rel="noopener noreferrer">IntersectionObserverEntry<ExternalLinkIcon/></a>çš„é›†åˆï¼Œä»£è¡¨å…³äºæ˜¯å¦åœ¨å¯è§è§†å£çš„ä¸€ç³»åˆ—å€¼ã€‚</p>
<p>å…¶ä¸­ï¼Œ<code v-pre>entry.isIntersecting</code> ä»£è¡¨ç›®æ ‡å…ƒç´ å¯è§ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token comment">// åˆ©ç”¨ IntersectionObserver ç›‘å¬å…ƒç´ æ˜¯å¦å‡ºç°åœ¨è§†å£</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">changes</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// changes: ç›®æ ‡å…ƒç´ é›†åˆ</span>
  changes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">change</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// intersectionRatio</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>change<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> img <span class="token operator">=</span> change<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
      observer<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¡«å……å®Œ img çš„ src å±æ€§åå–æ¶ˆç›‘å¬ã€‚</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ç›‘å¬ä¸€ä¸ªç›®æ ‡å…ƒç´ ã€‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–¹æ¡ˆå››-lazyloading-å±æ€§" tabindex="-1"><a class="header-anchor" href="#æ–¹æ¡ˆå››-lazyloading-å±æ€§"><span>æ–¹æ¡ˆå››ï¼š LazyLoading å±æ€§</span></a></h3>
<p>æµè§ˆå™¨è§‰å¾—æ‡’åŠ è½½è¿™äº‹å¯ä»¥äº¤ç»™è‡ªå·±åšï¼Œä½ ä»¬å¼€å‘è€…åŠ ä¸ªå±æ€§å°±å¥½äº†ã€‚</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logo.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="æµè§ˆå™¨ä¸­å¦‚ä½•å®ç°å‰ªåˆ‡æ¿å¤åˆ¶çš„åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#æµè§ˆå™¨ä¸­å¦‚ä½•å®ç°å‰ªåˆ‡æ¿å¤åˆ¶çš„åŠŸèƒ½"><span>æµè§ˆå™¨ä¸­å¦‚ä½•å®ç°å‰ªåˆ‡æ¿å¤åˆ¶çš„åŠŸèƒ½</span></a></h2>
<p>æ–¹å¼ä¸€ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ <code v-pre>clipboard-copy</code></p>
<p>æ–¹å¼äºŒï¼šæœ€ä¸ºæ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ Clipboard API è¿›è¡Œå®ç°(ä¸å…¼å®¹IEæµè§ˆå™¨)</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">writeClipBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span><span class="token string">'Hiï¼ŒChristine'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å†™å…¥'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">writeClipBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–¹å¼ä¸‰ï¼šé€‰ä¸­: Selection API ï¼ˆå…¼å®¹IEæµè§ˆå™¨ï¼‰</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> selection <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// RangeAPI: åˆ¶é€ åŒºåŸŸ</span>
range<span class="token punctuation">.</span><span class="token function">selectNodeContents</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Selection: é€‰ä¸­åŒºåŸŸ</span>
selection<span class="token punctuation">.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>

selectedText <span class="token operator">=</span> selection<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¦‚æœæŠŠjsonæ•°æ®è½¬åŒ–ä¸ºdemo-jsonå¹¶ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#å¦‚æœæŠŠjsonæ•°æ®è½¬åŒ–ä¸ºdemo-jsonå¹¶ä¸‹è½½"><span>å¦‚æœæŠŠJSONæ•°æ®è½¬åŒ–ä¸ºdemo.jsonå¹¶ä¸‹è½½</span></a></h2>
<h3 id="æ–¹å¼ä¸€-json-è§†ä¸ºå­—ç¬¦ä¸²-å¯ä»¥åˆ©ç”¨-dataurl-è¿›è¡Œä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼ä¸€-json-è§†ä¸ºå­—ç¬¦ä¸²-å¯ä»¥åˆ©ç”¨-dataurl-è¿›è¡Œä¸‹è½½"><span>æ–¹å¼ä¸€ï¼šjson è§†ä¸ºå­—ç¬¦ä¸²ï¼Œå¯ä»¥åˆ©ç”¨ DataURL è¿›è¡Œä¸‹è½½</span></a></h3>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
  a<span class="token punctuation">.</span>download <span class="token operator">=</span> name
  a<span class="token punctuation">.</span>href <span class="token operator">=</span> url
  a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Christine'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">'å¥³'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dataUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data:,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token function">download</span><span class="token punctuation">(</span>dataUrl<span class="token punctuation">,</span> <span class="token string">'demo.json'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–¹å¼äºŒ-è½¬åŒ–ä¸º-object-url-è¿›è¡Œä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼äºŒ-è½¬åŒ–ä¸º-object-url-è¿›è¡Œä¸‹è½½"><span>æ–¹å¼äºŒï¼šè½¬åŒ–ä¸º Object URL è¿›è¡Œä¸‹è½½</span></a></h3>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
  a<span class="token punctuation">.</span>download <span class="token operator">=</span> name
  a<span class="token punctuation">.</span>href <span class="token operator">=</span> url
  a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Christine'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">'å¥³'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">download</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">'demo.json'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¦‚ä½•æ‰¾åˆ°å½“å‰é¡µé¢å‡ºç°æ¬¡æ•°æœ€å¤šçš„-html-æ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•æ‰¾åˆ°å½“å‰é¡µé¢å‡ºç°æ¬¡æ•°æœ€å¤šçš„-html-æ ‡ç­¾"><span>å¦‚ä½•æ‰¾åˆ°å½“å‰é¡µé¢å‡ºç°æ¬¡æ•°æœ€å¤šçš„ HTML æ ‡ç­¾</span></a></h2>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getMostFrequentTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    counter<span class="token punctuation">[</span>element<span class="token punctuation">.</span>tagName<span class="token punctuation">]</span> <span class="token operator">=</span> counter<span class="token punctuation">[</span>element<span class="token punctuation">.</span>tagName<span class="token punctuation">]</span>
      <span class="token operator">?</span> counter<span class="token punctuation">[</span>element<span class="token punctuation">.</span>tagName<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> orderedTags <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag1<span class="token punctuation">,</span> tag2</span><span class="token punctuation">)</span> <span class="token operator">=></span> tag2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> tag1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> tag <span class="token keyword">of</span> orderedTags<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> orderedTags<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¼˜åŒ–æ–¹æ¡ˆ</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getMostFrequentTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> maxArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> maxCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>tagName<span class="token punctuation">}</span> <span class="token operator">=</span> element
    <span class="token keyword">let</span> count <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>tagName<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">;</span>
    count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> maxCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      maxCount <span class="token operator">=</span> count<span class="token punctuation">;</span>
      maxArray <span class="token operator">=</span> <span class="token punctuation">[</span>tagName<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> maxCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      maxArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tagName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>tagName<span class="token punctuation">,</span> count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> maxArray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¦‚ä½•å°è£…ä¸€ä¸ªæ”¯æŒè¿‡æœŸæ—¶é—´çš„-localstorage" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å°è£…ä¸€ä¸ªæ”¯æŒè¿‡æœŸæ—¶é—´çš„-localstorage"><span>å¦‚ä½•å°è£…ä¸€ä¸ªæ”¯æŒè¿‡æœŸæ—¶é—´çš„ localStorage</span></a></h2>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  localStorage<span class="token punctuation">.</span><span class="token function-variable function">setItem</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">Infinity</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Infinityæ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºæ— ç©·å¤§</span>
    <span class="token keyword">const</span> payload <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">__value</span><span class="token operator">:</span> value<span class="token punctuation">,</span>
      <span class="token literal-property property">__expiresTime</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> time
    <span class="token punctuation">}</span> <span class="token operator">:</span> value<span class="token punctuation">;</span>
    <span class="token class-name">Storage</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  localStorage<span class="token punctuation">.</span><span class="token function-variable function">getItem</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">Storage</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'{}'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> value<span class="token punctuation">[</span><span class="token string">'__expiresTime'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> value<span class="token punctuation">[</span><span class="token string">'__value'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cookie-å±æ€§" tabindex="-1"><a class="header-anchor" href="#cookie-å±æ€§"><span>Cookie å±æ€§</span></a></h2>
<ul>
<li>Domain</li>
<li>Path</li>
<li>Expire/MaxAge</li>
<li>HttpOnly: æ˜¯å¦å…è®¸è¢« JavaScript æ“ä½œ</li>
<li>Secure: åªèƒ½åœ¨ HTTPS è¿æ¥ä¸­é…ç½®</li>
<li>SameSite</li>
</ul>
<h3 id="cookie-maxage" tabindex="-1"><a class="header-anchor" href="#cookie-maxage"><span>Cookie maxAge</span></a></h3>
<p>å¦‚æœæ²¡æœ‰ maxAgeï¼Œåˆ™ cookie çš„æœ‰æ•ˆæ—¶é—´ä¸ºä¼šè¯æ—¶é—´ã€‚å³æµè§ˆå™¨å…³é—­å°±æ²¡äº†ã€‚</p>
<h3 id="cookie-samesite" tabindex="-1"><a class="header-anchor" href="#cookie-samesite"><span>Cookie SameSite</span></a></h3>
<p>SameSiteä¸­æœ‰ä»¥ä¸‹ä¸‰ä¸ªå€¼ï¼š</p>
<ul>
<li>None: ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå‘ç¬¬ä¸‰æ–¹ç½‘ç«™è¯·æ±‚å‘é€ Cookie</li>
<li>Lax: åªæœ‰å¯¼èˆªåˆ°ç¬¬ä¸‰æ–¹ç½‘ç«™çš„ Get é“¾æ¥ä¼šå‘é€ Cookieï¼Œè·¨åŸŸçš„å›¾ç‰‡ã€iframeã€formè¡¨å•éƒ½ä¸ä¼šå‘é€ Cookie</li>
<li>Strict: ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šå‘ç¬¬ä¸‰æ–¹ç½‘ç«™è¯·æ±‚å‘é€Cookie</li>
</ul>
<p>ç›®å‰ï¼Œä¸»æµæµè§ˆå™¨ <code v-pre>Same-Site</code> çš„é»˜è®¤å€¼ä¸º <code v-pre>Lax</code>ï¼Œè€Œåœ¨ä»¥å‰æ˜¯ <code v-pre>None</code>ï¼Œå°†ä¼šé¢„é˜²å¤§éƒ¨åˆ† CSRF æ”»å‡»ï¼Œå¦‚æœéœ€è¦æ‰‹åŠ¨æŒ‡å®š <code v-pre>Same-Site</code> ä¸º Noneï¼Œéœ€è¦æŒ‡å®š Cookie å±æ€§ <code v-pre>Secure</code>ï¼Œå³åœ¨ https ä¸‹å‘é€ã€‚</p>
<h3 id="cookie-httponly" tabindex="-1"><a class="header-anchor" href="#cookie-httponly"><span>Cookie HttpOnly</span></a></h3>
<p>å¦‚æœè¿™ä¸ªå±æ€§è®¾ç½®ä¸ºtrueï¼Œå°±ä¸èƒ½é€šè¿‡jsè„šæœ¬æ¥è·å–cookieçš„å€¼ï¼Œèƒ½æœ‰æ•ˆçš„é˜²æ­¢xssæ”»å‡»ã€‚</p>
<h3 id="å…³äºjsæ“ä½œcookie" tabindex="-1"><a class="header-anchor" href="#å…³äºjsæ“ä½œcookie"><span>å…³äºjsæ“ä½œCookie</span></a></h3>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token comment">//è¯»å–æµè§ˆå™¨ä¸­çš„cookie</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//å†™å…¥cookie</span>
document<span class="token punctuation">.</span>cookie<span class="token operator">=</span><span class="token string">'name=christine;path=/;domain=.baidu.com'</span><span class="token punctuation">;</span>

<span class="token comment">// cookie çš„è¿‡æœŸæ—¶é—´æ”¹ä¸ºè¿‡å»æ—¶å³å¯åˆ é™¤æˆåŠŸ</span>
<span class="token comment">// max-age è®¾ç½®ä¸º -1 å³å¯æˆåŠŸ</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">'name=christine; max-age=-1'</span>

<span class="token comment">// æˆ–è€…ä½¿ç”¨æœ€æ–°çš„Cookieæ“ä½œAPI</span>
cookieStore<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‚è€ƒæ–‡ç« <a href="https://juejin.cn/post/6844903501869350925" target="_blank" rel="noopener noreferrer">æŠŠcookieèŠæ¸…æ¥š<ExternalLinkIcon/></a><a href="https://javascript.ruanyifeng.com/bom/cookie.html" target="_blank" rel="noopener noreferrer">é˜®ä¸€å³°JavaScriptæ•™ç¨‹<ExternalLinkIcon/></a></p>
<h2 id="localhost-3000-ä¸-localhost-5000-çš„-cookie-ä¿¡æ¯æ˜¯å¦å…±äº«" tabindex="-1"><a class="header-anchor" href="#localhost-3000-ä¸-localhost-5000-çš„-cookie-ä¿¡æ¯æ˜¯å¦å…±äº«"><span>localhost:3000 ä¸ localhost:5000 çš„ cookie ä¿¡æ¯æ˜¯å¦å…±äº«</span></a></h2>
<p>å…±äº«ã€‚</p>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>Cookie åªåŒºåˆ†åŸŸï¼Œä¸åŒºåˆ†ç«¯å£å’Œåè®®ï¼Œåªè¦åŸŸç›¸åŒï¼Œå³ä½¿ç«¯å£å·æˆ–åè®®ä¸åŒï¼Œcookie ä¹Ÿèƒ½å…±äº«ã€‚</p>
</div>
<p>å‚è€ƒé“¾æ¥<a href="https://juejin.cn/post/6863377752939036679" target="_blank" rel="noopener noreferrer">Cookieå±æ€§è¯¦è§£<ExternalLinkIcon/></a></p>
<h2 id="ä»€ä¹ˆæ˜¯äº‹ä»¶å§”æ‰˜-e-currenttarget-ä¸-e-target-æœ‰ä½•åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯äº‹ä»¶å§”æ‰˜-e-currenttarget-ä¸-e-target-æœ‰ä½•åŒºåˆ«"><span>ä»€ä¹ˆæ˜¯äº‹ä»¶å§”æ‰˜ï¼Œe.currentTarget ä¸ e.target æœ‰ä½•åŒºåˆ«</span></a></h2>
<blockquote>
<p>äº‹ä»¶å§”æ‰˜æŒ‡å½“æœ‰å¤§é‡å­å…ƒç´ è§¦å‘äº‹ä»¶æ—¶ï¼Œå°†äº‹ä»¶ç›‘å¬å™¨ç»‘å®šåœ¨çˆ¶å…ƒç´ è¿›è¡Œç›‘å¬ï¼Œæ­¤æ—¶æ•°ç™¾ä¸ªäº‹ä»¶ç›‘å¬å™¨å˜ä¸ºäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œæå‡äº†ç½‘é¡µæ€§èƒ½ã€‚</p>
</blockquote>
<p><code v-pre>Event</code> æ¥å£çš„åªè¯»å±æ€§ <code v-pre>currentTarget</code> è¡¨ç¤ºçš„ï¼Œæ ‡è¯†æ˜¯å½“äº‹ä»¶æ²¿ç€ DOM è§¦å‘æ—¶äº‹ä»¶çš„å½“å‰ç›®æ ‡ã€‚å®ƒæ€»æ˜¯æŒ‡å‘äº‹ä»¶ç»‘å®šçš„å…ƒç´ ï¼Œè€Œ <code v-pre>Event.target</code> åˆ™æ˜¯äº‹ä»¶è§¦å‘çš„å…ƒç´ ã€‚</p>
<h2 id="å¼‚æ­¥åŠ è½½-js-è„šæœ¬æ—¶-async-ä¸-defer-æœ‰ä½•åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#å¼‚æ­¥åŠ è½½-js-è„šæœ¬æ—¶-async-ä¸-defer-æœ‰ä½•åŒºåˆ«"><span>å¼‚æ­¥åŠ è½½ JS è„šæœ¬æ—¶ï¼Œasync ä¸ defer æœ‰ä½•åŒºåˆ«</span></a></h2>
<p>å¦‚æœæ²¡æœ‰ <code v-pre>defer</code> æˆ– <code v-pre>async</code> å±æ€§ï¼Œæµè§ˆå™¨ä¼šç«‹å³åŠ è½½å¹¶æ‰§è¡Œç›¸åº”çš„è„šæœ¬ã€‚å®ƒä¸ä¼šç­‰å¾…åç»­åŠ è½½çš„æ–‡æ¡£å…ƒç´ ï¼Œè¯»å–åˆ°å°±ä¼šå¼€å§‹åŠ è½½å’Œæ‰§è¡Œï¼Œè¿™æ ·å°±é˜»å¡äº†åç»­æ–‡æ¡£çš„åŠ è½½ã€‚</p>
<p><img src="/blog/deferandasync.jpg" alt="alt"></p>
<p>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå³ <code v-pre>&lt;script&gt;</code> æ²¡æœ‰ä»»ä½•é¢å¤–å±æ€§æ ‡è®°çš„æƒ…å†µä¸‹ï¼Œæœ‰å‡ ç‚¹å…±è¯†</p>
<ol>
<li>JS çš„è„šæœ¬åˆ†ä¸º<code v-pre>åŠ è½½</code>ã€<code v-pre>è§£æ</code>ã€<code v-pre>æ‰§è¡Œ</code>å‡ ä¸ªæ­¥éª¤ï¼Œç®€å•å¯¹åº”åˆ°å›¾ä¸­å°±æ˜¯ fetch (åŠ è½½) å’Œ execution (è§£æå¹¶æ‰§è¡Œ)</li>
<li><code v-pre>JS çš„è„šæœ¬åŠ è½½(fetch)ä¸”æ‰§è¡Œ(execution)ä¼šé˜»å¡ DOM çš„æ¸²æŸ“</code>ï¼Œå› æ­¤ JS ä¸€èˆ¬æ”¾åˆ°æœ€åå¤´</li>
</ol>
<p>è€Œ <code v-pre>defer</code> ä¸ <code v-pre>async</code> çš„åŒºåˆ«å¦‚ä¸‹:</p>
<ul>
<li>
<p>ç›¸åŒç‚¹: <code v-pre>å¼‚æ­¥åŠ è½½ (fetch)</code></p>
</li>
<li>
<p>ä¸åŒç‚¹:</p>
<ul>
<li>async åŠ è½½(fetch)å®Œæˆåç«‹å³æ‰§è¡Œ (execution)ï¼Œå› æ­¤å¯èƒ½ä¼šé˜»å¡ DOM è§£æï¼›</li>
<li>defer åŠ è½½(fetch)å®Œæˆåéœ€è¦ç­‰åˆ°DOM è§£æå®Œæˆåï¼Œäº‹ä»¶ <code v-pre>DomContentLoaded</code> è§¦å‘æ‰§è¡Œä¹‹å‰æ‰§è¡Œ(execution)ã€‚</li>
</ul>
</li>
</ul>
<p>ğŸŒ°
è‹¥ä»¥ä¸‹ js åŠ è½½æ—¶ï¼Œå±æ€§æ˜¯ <code v-pre>async</code> ä¸ <code v-pre>defer</code> æ—¶ï¼Œè¾“å‡ºæœ‰ä½•ä¸åŒï¼Ÿ</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre v-pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./defer.js<span class="token punctuation">"</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./async.js<span class="token punctuation">"</span></span> <span class="token attr-name">async</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"DCL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>defer.js</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Defer Script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>async.js</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Async Script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åº”è¯¥æ˜¯ <code v-pre>Start</code> =&gt; <code v-pre>Defer Script</code> =&gt; <code v-pre>DCL</code>ï¼Œasync scriptæ˜¯è„±ç¦»DOMçš„ï¼Œå’ŒåŠ è½½è‡ªèº«æ–‡ä»¶çš„å¤§å°æœ‰å…³ï¼Œæ–‡ä»¶æ¯”è¾ƒå°çš„ï¼ŒåŠ è½½å¿«ï¼Œç„¶åæ‰§è¡Œï¼›æ–‡ä»¶å¤§çš„åŠ è½½æ…¢ï¼Œç„¶åæ‰§è¡Œã€‚</p>
<p><a href="https://juejin.cn/post/6894629999215640583" target="_blank" rel="noopener noreferrer">æ–‡ç« ï¼š<ExternalLinkIcon/></a></p>
<h2 id="react-vue-ä¸­çš„-router-å®ç°åŸç†å¦‚ä½•" tabindex="-1"><a class="header-anchor" href="#react-vue-ä¸­çš„-router-å®ç°åŸç†å¦‚ä½•"><span>React/Vue ä¸­çš„ router å®ç°åŸç†å¦‚ä½•</span></a></h2>
<p>å‰ç«¯è·¯ç”±æœ‰ä¸¤ç§å®ç°æ–¹å¼:</p>
<h3 id="history-api" tabindex="-1"><a class="header-anchor" href="#history-api"><span>history API</span></a></h3>
<p>é€šè¿‡ <code v-pre>history.pushState()</code> è·³è½¬è·¯ç”±
é€šè¿‡ <code v-pre>popstate/window.onpopstate event</code> ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œä½†æ— æ³•ç›‘å¬åˆ° history.pushState() æ—¶çš„è·¯ç”±å˜åŒ–</p>
<h3 id="hash" tabindex="-1"><a class="header-anchor" href="#hash"><span>hash</span></a></h3>
<p>é€šè¿‡ <code v-pre>location.hash</code> è·³è½¬è·¯ç”±
é€šè¿‡ <code v-pre>hashchange/window.onhashchange event</code> ç›‘å¬è·¯ç”±å˜åŒ–</p>
</div></template>


