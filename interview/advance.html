<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.8" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <meta name="referrer" content="no-referrer"><link rel="icon" href="/growth.jpg"><title>JSè¿›é˜¶çŸ¥è¯†ç‚¹ | Christine</title><meta name="description" content="ä¸€åä¸“æ³¨å‰ç«¯å¼€å‘çš„ç¨‹åºåª› ğŸ‘§ğŸ»">
    <link rel="preload" href="/blog/assets/style-C08YezIb.css" as="style"><link rel="stylesheet" href="/blog/assets/style-C08YezIb.css">
    <link rel="modulepreload" href="/blog/assets/app-C8Xn24jF.js"><link rel="modulepreload" href="/blog/assets/advance.html-C3pnkXlB.js">
    <link rel="prefetch" href="/blog/assets/index.html-CM6jBVt3.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-C6L8a4fP.js" as="script"><link rel="prefetch" href="/blog/assets/nginx.html-Bq1Q3T_I.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-Zm5FAoYh.js" as="script"><link rel="prefetch" href="/blog/assets/prettier.html-D_HkrdxC.js" as="script"><link rel="prefetch" href="/blog/assets/stylelint.html-DhohiZCV.js" as="script"><link rel="prefetch" href="/blog/assets/umi.html-bZ2Ph2P8.js" as="script"><link rel="prefetch" href="/blog/assets/FactoryPattern.html-DHfeVGHg.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-CTPzo7K8.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-CUROa93m.js" as="script"><link rel="prefetch" href="/blog/assets/browser.html-DK3VeRhs.js" as="script"><link rel="prefetch" href="/blog/assets/css.html-BKY3Mi15.js" as="script"><link rel="prefetch" href="/blog/assets/es6.html-B30rnm-v.js" as="script"><link rel="prefetch" href="/blog/assets/eventLoop.html-DE06P53X.js" as="script"><link rel="prefetch" href="/blog/assets/handWrite.html-DXp-hFnV.js" as="script"><link rel="prefetch" href="/blog/assets/html.html-Btx2VmlT.js" as="script"><link rel="prefetch" href="/blog/assets/http.html-XfsL6qRE.js" as="script"><link rel="prefetch" href="/blog/assets/jsAsync.html-CwhETaoP.js" as="script"><link rel="prefetch" href="/blog/assets/safetyProtection.html-CuqgWWQ-.js" as="script"><link rel="prefetch" href="/blog/assets/url.html-B2x9gcLO.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-CGjfw9oy.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-C3iyfIuo.js" as="script"><link rel="prefetch" href="/blog/assets/antd.html-DMY_nhd6.js" as="script"><link rel="prefetch" href="/blog/assets/css.html-10ae-nYX.js" as="script"><link rel="prefetch" href="/blog/assets/nginx.html-JG3ijibO.js" as="script"><link rel="prefetch" href="/blog/assets/react.html-BiQaBfQe.js" as="script"><link rel="prefetch" href="/blog/assets/stylelint.html-CCkSQJPI.js" as="script"><link rel="prefetch" href="/blog/assets/vite.html-CAwYGphH.js" as="script"><link rel="prefetch" href="/blog/assets/vscode.html-CdcGrCOe.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-DzTjtE24.js" as="script"><link rel="prefetch" href="/blog/assets/RN.html-D5rs7Dss.js" as="script"><link rel="prefetch" href="/blog/assets/advance.html-BNDmdJjZ.js" as="script"><link rel="prefetch" href="/blog/assets/hooks.html-Bw9pzYbE.js" as="script"><link rel="prefetch" href="/blog/assets/reactInterview.html-DA-Ul4_k.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-CkDHoN-f.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-CI8fM_cU.js" as="script"><link rel="prefetch" href="/blog/assets/advance.html-64RPqVTj.js" as="script"><link rel="prefetch" href="/blog/assets/base.html-DGAYFaJ6.js" as="script"><link rel="prefetch" href="/blog/assets/challenge.html-D8x2q-a5.js" as="script"><link rel="prefetch" href="/blog/assets/challengeBuildIn.html-BiDzWy9o.js" as="script"><link rel="prefetch" href="/blog/assets/interview.html-DuiYON7c.js" as="script"><link rel="prefetch" href="/blog/assets/tsconfig.html-BEo61lHZ.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-3xc3phrg.js" as="script"><link rel="prefetch" href="/blog/assets/network.html-DwYrVGXL.js" as="script"><link rel="prefetch" href="/blog/assets/render.html-Opwmw_lf.js" as="script"><link rel="prefetch" href="/blog/assets/webOptimize.html-DkmLHRC3.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-CMg9haB1.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/blog/"><img class="logo" src="/blog/logo.png" alt="Christine"><span class="site-name can-hide" aria-hidden="true">Christine</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link route-link-active" href="/blog/interview/" aria-label="å‰ç«¯é¢è¯•ä¹‹é“"><!--[--><!--[--><!--]--> å‰ç«¯é¢è¯•ä¹‹é“ <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/react/" aria-label="React"><!--[--><!--[--><!--]--> React <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/webpack/" aria-label="webpack"><!--[--><!--[--><!--]--> webpack <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/typescript/" aria-label="TypeScript"><!--[--><!--[--><!--]--> TypeScript <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/tailwind-css/" aria-label="TailWind CSS"><!--[--><!--[--><!--]--> TailWind CSS <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/advance/prettier.html" aria-label="å‰ç«¯è¿›é˜¶"><!--[--><!--[--><!--]--> å‰ç«¯è¿›é˜¶ <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/automate/" aria-label="å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²"><!--[--><!--[--><!--]--> å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½² <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/git/" aria-label="Git"><!--[--><!--[--><!--]--> Git <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/other/css.html" aria-label="è¸©è¿‡çš„å‘"><!--[--><!--[--><!--]--> è¸©è¿‡çš„å‘ <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å‰ç«¯ä¹¦ç±"><span class="title">å‰ç«¯ä¹¦ç±</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å‰ç«¯ä¹¦ç±"><span class="title">å‰ç«¯ä¹¦ç±</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/blog/books/" aria-label="JavaScriptè®¾è®¡æ¨¡å¼"><!--[--><!--[--><!--]--> JavaScriptè®¾è®¡æ¨¡å¼ <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/Christine-Only/blog" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link route-link-active" href="/blog/interview/" aria-label="å‰ç«¯é¢è¯•ä¹‹é“"><!--[--><!--[--><!--]--> å‰ç«¯é¢è¯•ä¹‹é“ <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/react/" aria-label="React"><!--[--><!--[--><!--]--> React <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/webpack/" aria-label="webpack"><!--[--><!--[--><!--]--> webpack <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/typescript/" aria-label="TypeScript"><!--[--><!--[--><!--]--> TypeScript <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/tailwind-css/" aria-label="TailWind CSS"><!--[--><!--[--><!--]--> TailWind CSS <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/advance/prettier.html" aria-label="å‰ç«¯è¿›é˜¶"><!--[--><!--[--><!--]--> å‰ç«¯è¿›é˜¶ <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/automate/" aria-label="å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²"><!--[--><!--[--><!--]--> å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½² <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/git/" aria-label="Git"><!--[--><!--[--><!--]--> Git <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/blog/other/css.html" aria-label="è¸©è¿‡çš„å‘"><!--[--><!--[--><!--]--> è¸©è¿‡çš„å‘ <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å‰ç«¯ä¹¦ç±"><span class="title">å‰ç«¯ä¹¦ç±</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å‰ç«¯ä¹¦ç±"><span class="title">å‰ç«¯ä¹¦ç±</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/blog/books/" aria-label="JavaScriptè®¾è®¡æ¨¡å¼"><!--[--><!--[--><!--]--> JavaScriptè®¾è®¡æ¨¡å¼ <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/Christine-Only/blog" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Css <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/interview/css.html" aria-label="CSS çŸ¥è¯†ç‚¹"><!--[--><!--[--><!--]--> CSS çŸ¥è¯†ç‚¹ <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Html <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/interview/html.html" aria-label="Html çŸ¥è¯†ç‚¹"><!--[--><!--[--><!--]--> Html çŸ¥è¯†ç‚¹ <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">JavaScript <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link route-link-active sidebar-item" href="/blog/interview/" aria-label="JSåŸºç¡€çŸ¥è¯†ç‚¹"><!--[--><!--[--><!--]--> JSåŸºç¡€çŸ¥è¯†ç‚¹ <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active sidebar-item active" href="/blog/interview/advance.html" aria-label="JSè¿›é˜¶çŸ¥è¯†ç‚¹"><!--[--><!--[--><!--]--> JSè¿›é˜¶çŸ¥è¯†ç‚¹ <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/#callã€apply-åŠ-bind-åŒºåˆ«" aria-label="callã€apply åŠ bind åŒºåˆ«"><!--[--><!--[--><!--]--> callã€apply åŠ bind åŒºåˆ« <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/#ä½œç”¨" aria-label="ä½œç”¨"><!--[--><!--[--><!--]--> ä½œç”¨ <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/#åŒºåˆ«" aria-label="åŒºåˆ«"><!--[--><!--[--><!--]--> åŒºåˆ« <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/blog/#å®ç°-callã€apply-åŠ-bind-å‡½æ•°" aria-label="å®ç° callã€apply åŠ bind å‡½æ•°"><!--[--><!--[--><!--]--> å®ç° callã€apply åŠ bind å‡½æ•° <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/#callçš„å®ç°" aria-label="callçš„å®ç°"><!--[--><!--[--><!--]--> callçš„å®ç° <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/#applyçš„å®ç°" aria-label="applyçš„å®ç°"><!--[--><!--[--><!--]--> applyçš„å®ç° <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/#bindçš„å®ç°" aria-label="bindçš„å®ç°"><!--[--><!--[--><!--]--> bindçš„å®ç° <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/blog/#new" aria-label="new"><!--[--><!--[--><!--]--> new <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/#newçš„ä½œç”¨" aria-label="newçš„ä½œç”¨"><!--[--><!--[--><!--]--> newçš„ä½œç”¨ <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/#å®ç°newæ“ä½œç¬¦" aria-label="å®ç°newæ“ä½œç¬¦"><!--[--><!--[--><!--]--> å®ç°newæ“ä½œç¬¦ <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/blog/#instanceof" aria-label="instanceof"><!--[--><!--[--><!--]--> instanceof <!--[--><!--]--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/#å®ç°instanceof" aria-label="å®ç°instanceof"><!--[--><!--[--><!--]--> å®ç°instanceof <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/blog/#æ‰‹å†™-promise" aria-label="æ‰‹å†™ Promise"><!--[--><!--[--><!--]--> æ‰‹å†™ Promise <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/blog/interview/es6.html" aria-label="ES6çŸ¥è¯†ç‚¹"><!--[--><!--[--><!--]--> ES6çŸ¥è¯†ç‚¹ <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/interview/jsAsync.html" aria-label="JSå¼‚æ­¥ç¼–ç¨‹"><!--[--><!--[--><!--]--> JSå¼‚æ­¥ç¼–ç¨‹ <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/interview/eventLoop.html" aria-label="Event Loop"><!--[--><!--[--><!--]--> Event Loop <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/interview/handWrite.html" aria-label="JSæ‰‹å†™é¢˜"><!--[--><!--[--><!--]--> JSæ‰‹å†™é¢˜ <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">æ€§èƒ½ä¼˜åŒ– <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/interview/performanceOptimization/webOptimize.html" aria-label="æ€§èƒ½æŒ‡æ ‡"><!--[--><!--[--><!--]--> æ€§èƒ½æŒ‡æ ‡ <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/interview/performanceOptimization/network.html" aria-label="ç½‘ç»œå±‚é¢çš„æ€§èƒ½ä¼˜åŒ–"><!--[--><!--[--><!--]--> ç½‘ç»œå±‚é¢çš„æ€§èƒ½ä¼˜åŒ– <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/interview/performanceOptimization/render.html" aria-label="æ¸²æŸ“å±‚é¢çš„æ€§èƒ½ä¼˜åŒ–"><!--[--><!--[--><!--]--> æ¸²æŸ“å±‚é¢çš„æ€§èƒ½ä¼˜åŒ– <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">HTTP <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/interview/http.html" aria-label="HTTP"><!--[--><!--[--><!--]--> HTTP <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">æµè§ˆå™¨ç›¸å…³çŸ¥è¯†ç‚¹ <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/interview/browser.html" aria-label="æµè§ˆå™¨ç›¸å…³çŸ¥è¯†ç‚¹"><!--[--><!--[--><!--]--> æµè§ˆå™¨ç›¸å…³çŸ¥è¯†ç‚¹ <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/blog/interview/url.html" aria-label="è¾“å…¥ URL åˆ°é¡µé¢å±•ç¤ºï¼Œè¿™ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆ"><!--[--><!--[--><!--]--> è¾“å…¥ URL åˆ°é¡µé¢å±•ç¤ºï¼Œè¿™ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆ <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">å‰ç«¯å®‰å…¨ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/blog/interview/safetyProtection.html" aria-label="å‰ç«¯å®‰å…¨"><!--[--><!--[--><!--]--> å‰ç«¯å®‰å…¨ <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="jsè¿›é˜¶çŸ¥è¯†ç‚¹" tabindex="-1"><a class="header-anchor" href="#jsè¿›é˜¶çŸ¥è¯†ç‚¹"><span>JSè¿›é˜¶çŸ¥è¯†ç‚¹</span></a></h1><h2 id="callã€apply-åŠ-bind-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#callã€apply-åŠ-bind-åŒºåˆ«"><span>callã€apply åŠ bind åŒºåˆ«</span></a></h2><h3 id="ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨"><span>ä½œç”¨</span></a></h3><p><code>call</code>ã€<code>apply</code>ã€<code>bind</code> ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯æ”¹å˜å‡½æ•°è¿è¡Œæ—¶çš„ <code>this</code> æŒ‡å‘ã€‚</p><p>ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦æ”¹å˜ <code>this</code> æŒ‡å‘å‘¢ï¼Ÿ ğŸŒ°ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;Picker&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Christine&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Christineï¼Œthis æŒ‡å‘ obj å¯¹è±¡</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>say<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Pickerï¼Œthis æŒ‡å‘ window å¯¹è±¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æŠŠ <code>say</code> æ”¾åœ¨ <code>setTimeout</code> æ–¹æ³•ä¸­ï¼Œåœ¨å»¶æ—¶å™¨ä¸­æ˜¯ä½œä¸ºå›è°ƒå‡½æ•°æ¥æ‰§è¡Œçš„ï¼Œå› æ­¤å›åˆ°ä¸»æ ˆæ‰§è¡Œæ—¶æ˜¯åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç¯å¢ƒä¸­æ‰§è¡Œçš„ï¼Œè¿™æ—¶å€™ <code>this</code> æŒ‡å‘ <code>window</code>ï¼Œæ‰€ä»¥è¾“å‡º <code>Picker</code>ã€‚</p><p>ä¸Šé¢çš„ä»£ç è¦æƒ³åœ¨å»¶æ—¶å™¨ä¸­å›è°ƒå‡½æ•°çš„ <code>this</code> æŒ‡å‘ <code>obj</code>ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ”¹å˜ <code>this</code> æŒ‡å‘äº†ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Christineï¼Œthis æŒ‡å‘ window å¯¹è±¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#åŒºåˆ«"><span>åŒºåˆ«</span></a></h3><ul><li><p><strong>call</strong></p><p><code>call</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>this</code> çš„æŒ‡å‘ï¼Œåé¢ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Product</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Food</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Product</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> <span class="token string">&#39;food&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Food</span><span class="token punctuation">(</span><span class="token string">&#39;cheese&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;cheese&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸º<code>null</code>ã€<code>undefined</code>çš„æ—¶å€™ï¼Œé»˜è®¤æŒ‡å‘window(åœ¨æµè§ˆå™¨ä¸­)</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// thisä¼šå˜æˆä¼ å…¥çš„objï¼›</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// thisæŒ‡å‘window</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// thisæŒ‡å‘window</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// thisæŒ‡å‘window</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>apply</strong></p><p><code>apply</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>this</code> çš„æŒ‡å‘ï¼Œåé¢ä¼ å…¥çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå‚æ•°çš„æ•°ç»„</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Product</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Food</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Product</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> price<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> <span class="token string">&#39;food&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Food</span><span class="token punctuation">(</span><span class="token string">&#39;cheese&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;cheese&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸º<code>null</code>ã€<code>undefined</code>çš„æ—¶å€™ï¼Œé»˜è®¤æŒ‡å‘window(åœ¨æµè§ˆå™¨ä¸­)</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// thisä¼šå˜æˆä¼ å…¥çš„objï¼›</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// thisæŒ‡å‘window</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// thisæŒ‡å‘window</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// thisæŒ‡å‘window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>bind</strong></p><p><code>bind</code> ç¬¬ä¸€å‚æ•°æ˜¯ <code>this</code> çš„æŒ‡å‘ï¼Œåé¢ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨(ä½†æ˜¯è¿™ä¸ªå‚æ•°åˆ—è¡¨å¯ä»¥åˆ†å¤šæ¬¡ä¼ å…¥)ï¼Œæ”¹å˜<code>this</code>æŒ‡å‘åä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ°¸ä¹…æ”¹å˜thisæŒ‡å‘çš„æ–°å‡½æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;å¼ ä¸‰&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> bindFn <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this ä¹Ÿä¼šå˜æˆä¼ å…¥çš„obj ï¼Œbindä¸æ˜¯ç«‹å³æ‰§è¡Œéœ€è¦æ‰§è¡Œä¸€æ¬¡</span>
<span class="token function">bindFn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// thisæŒ‡å‘obj [1,2]</span>
<span class="token function">bindFn</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token comment">// thisæŒ‡å‘obj [5, 6, 7]</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// thisæŒ‡å‘window [1,2]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><div class="custom-container tip"><p class="custom-container-title">æ€»ç»“</p><ul><li>ä¸‰è€…éƒ½å¯ä»¥æ”¹å˜å‡½æ•°çš„<code>this</code>æŒ‡å‘</li><li>ä¸‰è€…ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ <code>this</code> è¦æŒ‡å‘çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°æˆ–ç¬¬ä¸€ä¸ªå‚æ•°ä¸º <code>undefined</code> æˆ– <code>null</code>ï¼Œåˆ™é»˜è®¤æŒ‡å‘å…¨å±€ <code>window</code></li><li>ä¸‰è€…éƒ½å¯ä»¥ä¼ å‚ï¼Œä½†æ˜¯ <code>apply</code> æ˜¯æ•°ç»„ï¼Œè€Œ <code>call</code> æ˜¯å‚æ•°åˆ—è¡¨ï¼Œä¸” <code>apply</code> å’Œ <code>call</code> æ˜¯ä¸€æ¬¡æ€§ä¼ å…¥å‚æ•°ï¼Œè€Œ <code>bind</code> å¯ä»¥åˆ†ä¸ºå¤šæ¬¡ä¼ å…¥</li><li><code>bind</code> æ˜¯è¿”å›ç»‘å®š <code>this</code> ä¹‹åçš„å‡½æ•°ï¼Œ<code>apply</code>ã€ <code>call</code> åˆ™æ˜¯ç«‹å³æ‰§è¡Œ</li></ul></div><h2 id="å®ç°-callã€apply-åŠ-bind-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å®ç°-callã€apply-åŠ-bind-å‡½æ•°"><span>å®ç° callã€apply åŠ bind å‡½æ•°</span></a></h2><p>é¦–å…ˆä»ä»¥ä¸‹ä¸¤ç‚¹æ¥è€ƒè™‘å¦‚ä½•å®ç°è¿™å‡ ä¸ªå‡½æ•°</p><ul><li>ä¸ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆä¸Šä¸‹æ–‡é»˜è®¤ä¸º <code>window</code></li><li>æ”¹å˜äº† <code>this</code> æŒ‡å‘ï¼Œè®©æ–°çš„å¯¹è±¡å¯ä»¥æ‰§è¡Œè¯¥å‡½æ•°ï¼Œå¹¶èƒ½æ¥å—å‚æ•°</li></ul><h3 id="callçš„å®ç°" tabindex="-1"><a class="header-anchor" href="#callçš„å®ç°"><span>callçš„å®ç°</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;Error&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç è¯¦è§£ï¼š</p><ul><li>é¦–å…ˆ <code>context</code> ä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸ä¼ çš„è¯é»˜è®¤ä¸Šä¸‹æ–‡ä¸º <code>window</code></li><li><code>context.fn = this</code>ï¼Œæ­¤æ—¶çš„ <code>this</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ <code>call</code> æ–¹æ³•çš„å‡½æ•°</li><li>å› ä¸º <code>call</code> å¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°ä½œä¸ºè°ƒç”¨å‡½æ•°çš„å‚æ•°ï¼Œæ‰€ä»¥éœ€è¦å°†å‚æ•°å‰¥ç¦»å‡ºæ¥</li><li>è°ƒç”¨å‡½æ•°å¹¶å°†å¯¹è±¡ä¸Šçš„å‡½æ•°åˆ é™¤</li></ul><h3 id="applyçš„å®ç°" tabindex="-1"><a class="header-anchor" href="#applyçš„å®ç°"><span>applyçš„å®ç°</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;Error&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  context <span class="token operator">=</span> context <span class="token operator">||</span> window
  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token keyword">let</span> result
  <span class="token comment">// å¤„ç†å‚æ•°å’Œ call æœ‰åŒºåˆ«</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="bindçš„å®ç°" tabindex="-1"><a class="header-anchor" href="#bindçš„å®ç°"><span>bindçš„å®ç°</span></a></h3><p>å®ç°bindçš„æ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†è§£æˆä¸ºä¸‰éƒ¨åˆ†ï¼š</p><ul><li>ä¿®æ”¹ <code>this</code> æŒ‡å‘</li><li>åŠ¨æ€ä¼ é€’å‚æ•°</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// æ–¹å¼ä¸€ï¼šåªåœ¨bindä¸­ä¼ é€’å‡½æ•°å‚æ•°</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// æ–¹å¼äºŒï¼šåœ¨bindä¸­ä¼ é€’å‡½æ•°å‚æ•°ï¼Œä¹Ÿåœ¨è¿”å›å‡½æ•°ä¸­ä¼ é€’å‚æ•°</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å…¼å®¹ <code>new</code> å…³é”®å­—</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;Error&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment">// è¿”å›ä¸€ä¸ªå‡½æ•°</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å› ä¸ºè¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ new F()ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">F</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">_this</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arguments<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">_this</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç è¯¦è§£ï¼š</p><ul><li><code>this instanceof F</code>ï¼šç”¨äºæ£€æµ‹æ„é€ å‡½æ•° <code>F</code> çš„ <code>prototype</code> å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</li><li><code>args.concat(...arguments)</code>ï¼šè¿™ä¹ˆå®ç°çš„åŸå› æ˜¯å› ä¸º <code>bind</code> å¯ä»¥å®ç°ç±»ä¼¼è¿™æ ·çš„ä»£ç <code>fn.bind(obj,1)(2)</code>ï¼Œæ‰€ä»¥éœ€è¦å°†ä¸¤è¾¹çš„å‚æ•°æ‹¼æ¥ã€‚</li></ul><h2 id="new" tabindex="-1"><a class="header-anchor" href="#new"><span>new</span></a></h2><h3 id="newçš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#newçš„ä½œç”¨"><span>newçš„ä½œç”¨</span></a></h3><p>æˆ‘ä»¬å…ˆæ¥é€šè¿‡ä¸¤ä¸ªä¾‹å­æ¥äº†è§£ <code>new</code> çš„ä½œç”¨</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Christine&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// &#39;Christine&#39;</span>
p<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &#39;Christine&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ä¸Šé¢ä¸€ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥å¾—å‡ºè¿™äº›ç»“è®ºï¼š</p><ul><li><code>new</code> é€šè¿‡æ„é€ å‡½æ•° <code>Person</code> åˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§</li><li><code>new</code> é€šè¿‡æ„é€ å‡½æ•° <code>Person</code> åˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹é“¾ä¸­çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡ <code>new</code> æ“ä½œç¬¦ï¼Œå®ä¾‹ä¸æ„é€ å‡½æ•°é€šè¿‡åŸå‹é“¾è¿æ¥äº†èµ·æ¥</li></ul><p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºæ„é€ å‡½æ•°æ²¡æœ‰æ˜¾ç¤º <code>return</code> ä»»ä½•å€¼ï¼ˆé»˜è®¤è¿”å›<code>undefined</code>ï¼‰ï¼Œå¦‚æœè®©æ„é€ å‡½æ•°è¿”å›å€¼ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">return</span> <span class="token string">&#39;hello Christine&#39;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Christine&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// &#39;Christine&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆé€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆå¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š</p><ul><li>æ„é€ å‡½æ•°å¦‚æœè¿”å›åŸå§‹å€¼ï¼Œé‚£ä¹ˆè¿”å›çš„è¿™ä¸ªå€¼å’Œä¸è¿”å›å€¼ç»“æœæ˜¯ä¸€æ ·çš„</li></ul><p>é‚£å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„æ˜¯å¯¹è±¡å‘¢ï¼Ÿ</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// Person { name: &#39;Christine&#39; }</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Christine&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// {age: 18}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè™½ç„¶æ„é€ å‡½æ•°å†…éƒ¨çš„ <code>this</code> è¿˜æ˜¯ä¾æ—§æ­£å¸¸å·¥ä½œçš„ï¼Œä½†æ˜¯å½“è¿”å›å€¼ä¸ºå¯¹è±¡æ—¶ï¼Œè¿™ä¸ªè¿”å›å€¼å°±ä¼šè¢«æ­£å¸¸çš„è¿”å›å‡ºå»ã€‚</p><p>é‚£ä¹ˆé€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å†æ¬¡å¾—å‡ºäº†ä¸€ä¸ªç»“è®ºï¼š</p><ul><li>æ„é€ å‡½æ•°å¦‚æœè¿”å›å€¼ä¸ºå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿”å›å€¼ä¼šè¢«æ­£å¸¸ä½¿ç”¨ã€‚</li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>æ„é€ å‡½æ•°å°½é‡ä¸è¦è¿”å›å€¼ã€‚å› ä¸ºè¿”å›åŸå§‹å€¼ä¸ä¼šç”Ÿæ•ˆï¼Œè¿”å›å¯¹è±¡ä¼šå¯¼è‡´ <code>new</code> æ“ä½œç¬¦æ²¡æœ‰ä½œç”¨ã€‚</p></div><h3 id="å®ç°newæ“ä½œç¬¦" tabindex="-1"><a class="header-anchor" href="#å®ç°newæ“ä½œç¬¦"><span>å®ç°newæ“ä½œç¬¦</span></a></h3><p><a href="https://codepen.io/tangshiya/pen/KKboaxV" target="_blank" rel="noopener noreferrer">new æ“ä½œç¬¦å®ç°<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="instanceof" tabindex="-1"><a class="header-anchor" href="#instanceof"><span>instanceof</span></a></h2><blockquote><p>ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</p></blockquote><ul><li>è¯­æ³•ï¼š<code>object instanceof constructor</code><ul><li>objectï¼šæŸä¸ªå®ä¾‹å¯¹è±¡</li><li>constructorï¼šæŸä¸ªæ„é€ å‡½æ•°</li></ul></li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Object.create(null) ä¼šé€ æˆåˆ›å»ºçš„å¯¹è±¡å…¶ <code>__proto__</code> æŒ‡å‘ä¸ºç©º</p></div><p><img src="/blog/create.jpg" alt="alt"></p><h3 id="å®ç°instanceof" tabindex="-1"><a class="header-anchor" href="#å®ç°instanceof"><span>å®ç°instanceof</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">copyInstanceof</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠ null ç›´æ¥è¿”å› false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token string">&#39;function&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> source<span class="token punctuation">)</span> <span class="token operator">||</span> source <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token comment">// getPrototypeOf æ˜¯ Object å¯¹è±¡è‡ªå¸¦çš„ä¸€ä¸ªæ–¹æ³•ï¼Œèƒ½å¤Ÿæ‹¿åˆ°å‚æ•°çš„åŸå‹å¯¹è±¡</span>
  <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// æŸ¥æ‰¾åˆ°å°½å¤´ï¼Œè¿˜æ²¡æ‰¾åˆ°</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token comment">// æ‰¾åˆ°ç›¸åŒçš„åŸå‹å¯¹è±¡</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">==</span> target<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
      proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">copyInstanceof</span><span class="token punctuation">(</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> String<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">copyInstanceof</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> String<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">copyInstanceof</span><span class="token punctuation">(</span>Date<span class="token punctuation">,</span> Function<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">copyInstanceof</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Object<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ‰‹å†™-promise" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™-promise"><span>æ‰‹å†™ Promise</span></a></h2><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">PENDING_STATE</span> <span class="token operator">=</span> <span class="token string">&#39;pending&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">FULFILLED_STATE</span> <span class="token operator">=</span> <span class="token string">&#39;fulfilled&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">REJECTED_STATE</span> <span class="token operator">=</span> <span class="token string">&#39;rejected&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Promise</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token constant">PENDING_STATE</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–çŠ¶æ€</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onResolvedCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å­˜æ”¾å½“æˆåŠŸæ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„å‡½æ•°åˆ—è¡¨</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å­˜æ”¾å½“å¤±è´¥æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„å‡½æ•°åˆ—è¡¨</span>

    <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token constant">PENDING_STATE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token constant">FULFILLED_STATE</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> res<span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>onResolvedCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token constant">PENDING_STATE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token constant">REJECTED_STATE</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>reason <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          reason<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> reason<span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> error<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> reason<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// æ‰§è¡ŒexecutoræŠ¥é”™ï¼Œç›´æ¥reject</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulFilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    onFulFilled <span class="token operator">=</span> <span class="token keyword">typeof</span> onFulFilled <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span> <span class="token operator">?</span> <span class="token function-variable function">onFulFilled</span> <span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">;</span>
    onRejected <span class="token operator">=</span> <span class="token keyword">typeof</span> onRejected <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span> <span class="token operator">?</span> <span class="token function-variable function">onRejected</span> <span class="token operator">:</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> error <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// onFulFilled å¦‚æœæˆåŠŸäº†ï¼Œåº”è¯¥è¢«è°ƒç”¨</span>
      <span class="token comment">// onRejected  å¦‚æœå¤±è´¥äº†ï¼Œåº”è¯¥è¢«è°ƒç”¨</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token constant">FULFILLED_STATE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">onFulFilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span>
            <span class="token comment">// åˆ†æresult</span>
            <span class="token comment">// å¦‚æœæ˜¯promiseå¯¹è±¡ çœ‹promiseæ˜¯å¦æˆåŠŸ å¦‚æœæˆåŠŸå°±resolve å¦‚æœå¤±è´¥å°±reject</span>
            <span class="token comment">// å¦‚æœæ˜¯æ™®é€šå€¼ï¼Œç›´æ¥è¿”å›</span>
            <span class="token function">resolvePromise</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">,</span> promise<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token constant">REJECTED_STATE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span>
            <span class="token function">resolvePromise</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">,</span> promise<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token constant">PENDING_STATE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onResolvedCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">onFulFilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> promise
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ç­‰å¾…åŸåˆ™ï¼Œ ä¼ å…¥å¤šä¸ªpromiseï¼Œç­‰æ‰€æœ‰çš„promiseéƒ½æ»¡è¶³æ¡ä»¶ï¼Œæ‹¿åˆ°æ‰€æœ‰çš„æˆåŠŸç»“æœ</span>
  <span class="token keyword">static</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// å¿…é¡»è¦ç”¨è®¡æ•°å™¨åˆ¤æ–­ï¼Œç´¯è®¡æœ‰å¤šå°‘æ¬¡æˆåŠŸäº†ï¼Œ å¦‚æœç»“æœçš„ä¸ªæ•°å’Œpromisesä¸ªæ•°ç›¸ç­‰ï¼Œæ»¡è¶³æ¡ä»¶</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">promise<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>promise <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> res
          i<span class="token operator">++</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>promises<span class="token punctuation">.</span>length <span class="token operator">===</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸èƒ½ç”¨promises.length === arr.length åŸå› æ˜¯åˆšå¼€å§‹é‡åˆ°å¼‚æ­¥çš„arrçš„æ•°ç»„é•¿åº¦ç­‰äºpromises.lengthï¼Œä½†æ˜¯é‡Œé¢çš„å¼‚æ­¥çš„å€¼ä¸ºç©º</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ç«é€ŸåŸåˆ™ï¼Œè°é€‰æ»¡è¶³æ¡ä»¶ï¼Œå°±å…ˆè¢«.thenå¤„ç†ï¼Œå…¶å®ƒçš„å°±å¿½ç•¥ï¼Œè¿”å›æœ€å¿«çš„ç»“æœ</span>
  <span class="token keyword">static</span> <span class="token function">race</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">promise</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">resolvePromise</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">,</span> promise</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> promise<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;Chaining cycle detected for promise #&lt;Promise&gt;&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// promiseA+ (resolve, reject) =&gt; {} æ˜¯executor</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// resolve å’Œ reject æ˜¯ Promise å†…éƒ¨å®ç°å¥½çš„å‡½æ•°</span>
  <span class="token comment">// è¿™é‡Œçš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„</span>

  <span class="token comment">// reject(&#39;å¤±è´¥&#39;); // å°†çŠ¶æ€ä» pending æ”¹æˆäº† rejected ï¼ˆçŠ¶æ€å‡å›ºï¼‰</span>
  <span class="token comment">// setTimeout(() =&gt; {</span>
  <span class="token comment">//   resolve(200); // å°†çŠ¶æ€ä» pending æ”¹æˆäº† fulfilled</span>
  <span class="token comment">// }, 1000);</span>
  <span class="token comment">// reject(&#39;500&#39;)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;res: &#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// p.then(null, err =&gt; {</span>
<span class="token comment">//   throw new Error(err)</span>
<span class="token comment">// }).then(res =&gt; {</span>
<span class="token comment">//   console.log(&#39;res: &#39;, res);</span>
<span class="token comment">// }, error =&gt; {</span>
<span class="token comment">//   console.log(&#39;error: &#39;, error);</span>
<span class="token comment">// })</span>

<span class="token comment">// onFulFilled =&gt; pæˆåŠŸåï¼Œè°ƒç”¨çš„å›è°ƒ</span>
<span class="token comment">// onRejected =&gt;  på¤±è´¥åï¼Œè°ƒç”¨çš„å›è°ƒ</span>
<span class="token comment">// .catchå¯ä»¥å…¨å±€æ•è·é”™è¯¯</span>
<span class="token comment">// p.then(onFulFilled, onRejected).catch()</span>
<span class="token comment">// p.then(res =&gt; {</span>
<span class="token comment">//   console.log(&#39;res: &#39;, res);</span>
<span class="token comment">//   // return &#39;æˆåŠŸ&#39;</span>
<span class="token comment">//   return new Promise((resolve, reject) =&gt; {</span>
<span class="token comment">//     resolve(200)</span>
<span class="token comment">//   })</span>
<span class="token comment">// }, err =&gt; {</span>
<span class="token comment">//   console.log(&#39;err: &#39;, err);</span>
<span class="token comment">//   return &#39;å¤±è´¥&#39;</span>
<span class="token comment">//   return new Promise((resolve, reject) =&gt; {</span>
<span class="token comment">//     reject(404)</span>
<span class="token comment">//     // resolve(404)</span>
<span class="token comment">//   })</span>
<span class="token comment">// }).then(res =&gt; console.log(&#39;===&#39;, res), error =&gt; console.log(error));</span>

<span class="token comment">// é“¾å¼è°ƒç”¨2ä¸ªæ ¸å¿ƒè¦ç‚¹</span>
<span class="token comment">// 1. ä¸Šä¸€ä¸ª .then è¦è¿”å›ä¸€ä¸ª promise å¯¹è±¡</span>
<span class="token comment">// 2. ä¸‹ä¸€ä¸ª .then çš„å‚æ•°è¦æ‹¿åˆ°ä¸Šä¸€ä¸ª .then å›è°ƒçš„è¿”å›å€¼</span>


<span class="token comment">// å¾ªç¯å¼•ç”¨</span>
<span class="token comment">// const p2 = p.then(res =&gt; {</span>
<span class="token comment">//   console.log(&#39;res: &#39;, res);</span>
<span class="token comment">//   setTimeout(() =&gt; {</span>
<span class="token comment">//     return p2</span>
<span class="token comment">//   }, 0);</span>
<span class="token comment">// }, error =&gt; {</span>
<span class="token comment">//   console.log(error)</span>
<span class="token comment">//   return p2</span>
<span class="token comment">// });</span>

<span class="token comment">// Promise.resolve(4).then(res =&gt; console.log(&#39;===&#39;, res))</span>
<span class="token comment">// Promise.reject(&#39;é™æ€æ–¹æ³•reject&#39;).then(res =&gt; console.log(&#39;===&#39;, res), error =&gt; console.log(&#39;error&#39;, error))</span>

<span class="token comment">// const p3 = new Promise((resolve, reject) =&gt; {</span>
<span class="token comment">//   setTimeout(() =&gt; {</span>
<span class="token comment">//     resolve(3000)</span>
<span class="token comment">//   }, 3000);</span>
<span class="token comment">// })</span>

<span class="token comment">// const p4 = new Promise((resolve, reject) =&gt; {</span>
<span class="token comment">//   setTimeout(() =&gt; {</span>
<span class="token comment">//     resolve(1000)</span>
<span class="token comment">//   }, 1000);</span>
<span class="token comment">// })</span>

<span class="token comment">// const p5 = new Promise((resolve, reject) =&gt; {</span>
<span class="token comment">//   setTimeout(() =&gt; {</span>
<span class="token comment">//     resolve(2000)</span>
<span class="token comment">//   }, 2000);</span>
<span class="token comment">// })</span>

<span class="token comment">// const p6 = new Promise((resolve, reject) =&gt; {</span>
<span class="token comment">//   resolve(666)</span>
<span class="token comment">// })</span>

<span class="token comment">// Promise.all([p3, p4, p5, p6]).then(res =&gt; console.log(&#39;===&#39;, res))</span>
<span class="token comment">// Promise.race([p3, p4, p5, p6]).then(res =&gt; console.log(&#39;===&#39;, res))</span>
<span class="token comment">// Promise.race([Promise.reject(&#39;ç¬¬ä¸€ä¸ªè¢«è¿”å›&#39;), p3, p4, p5, p6]).then(res =&gt; console.log(&#39;===&#39;, res), error =&gt; console.log(&#39;error&#39;, error))</span>
<span class="token comment">// Promise.race([Promise.resolve(&#39;ç¬¬ä¸€ä¸ªè¢«è¿”å›&#39;), p3, p4, p5, p6]).then()</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="external-link label" href="https://github.com/Christine-Only/blog/edit/master/docs/interview/advance.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--[--><svg class="icon" viewBox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link route-link-active prev" href="/blog/interview/" aria-label="JSåŸºç¡€çŸ¥è¯†ç‚¹"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>JSåŸºç¡€çŸ¥è¯†ç‚¹</span></div><!--]--></a><a class="route-link next" href="/blog/interview/es6.html" aria-label="ES6çŸ¥è¯†ç‚¹"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>ES6çŸ¥è¯†ç‚¹</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/blog/assets/app-C8Xn24jF.js" defer></script>
  </body>
</html>
